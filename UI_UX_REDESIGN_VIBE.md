# UI_UX_REDESIGN_VIBE.md

## GraphRAG 法的リスク分析アプリ UI/UX 改修指示書

---

## 🎯 改修目的

現在のアプリは**機能実装は完了しているが、UIが機能ベースで構成されており、初見ユーザーが使い方を理解できない**。

本改修では以下を目的とする：

- ユーザーが「最初に何をすればよいか」迷わないUIにする
- 法務系サービスに必要な「安心感・導線・正解ルート」を明示する
- 機能は減らさず、**見せ方と順序のみを再設計する**

---

## 🔴 現状UIの問題点（変更対象）

### 問題① 入口が多すぎて「最初に何をすればいいか分からない」

現在、以下の機能が同時に表示されている：

- リスク診断ボタン
- 規約生成ボタン
- PDF Uploadボタン
- チャット入力欄
- GraphRAG検索 / Web検索 チェックボックス

**➡ どれから使えばよいか分からない**

### 問題② 機能の関係性が理解できない

ユーザーの疑問：

- リスク診断とチャットは何が違う？
- 規約生成はいつ押すの？
- PDF Uploadは最初？後？
- GraphRAGって何？チェック必要？

**➡ 開発者には明確でも、初見ユーザーには完全にブラックボックス**

### 問題③ 法務サービスなのに「手順が説明されない」

法務系サービスのユーザー心理：「間違った使い方をしたら意味がないのでは…？」

しかし現状は：

- 使い方ガイドがない
- ステップ表示がない
- 進行状況が見えない

**➡ 不安が増える**

---

## ✅ UI構造の変更方針（最重要）

### ❌ 変更前

- 機能ベースUI
- ボタンが横並び
- 自由操作型
- 技術用語が露出

### ✅ 変更後

- **ステップ型UI（強制ではないが誘導あり）**
- 一度に見せる機能は1ステップ分のみ
- 常に「今どこか」を可視化
- 技術用語は設定画面へ隠蔽

---

## 🧭 新UIの全体構成（必須実装）

### 画面上部に固定表示するステップナビ

```
[ ① 利用状況 ] → [ ② リスク分析 ] → [ ③ 規約生成 ]
```

**表示ルール：**

| 状態 | 表示 |
|------|------|
| 現在のステップ | 強調表示（色・太字・アクティブ背景） |
| 未到達ステップ | グレーアウト（クリック不可） |
| 完了ステップ | チェックマーク表示（クリックで戻れる） |

**※ このステップバーは常時表示する**

---

## 📌 ステップ別 UI 構成と実装指示

---

## 🟦 STEP① 利用状況を入力（新設）

### 目的

ユーザーのAI利用形態を整理し、以降の分析・規約生成の前提条件を作る。

### 実装指示

- **画面初期表示は必ず STEP①**
- **チャット入力欄はこの時点では非表示または無効化**
- **STEP①完了まで「リスク診断」「規約生成」ボタンは表示しない**

### 表示するUI要素

#### ヘッダー文言

```
あなたの状況を選択してください
```

#### カード形式またはチェックボックス形式で以下を表示

**【基本情報】**

| 選択項目 | 説明（ツールチップ可） |
|----------|------------------------|
| ☑ 個人開発者 | 個人でAIサービスを開発・運営 |
| ☑ 法人サービス | 法人としてAIサービスを提供 |
| ☑ 会員登録あり | ユーザー登録機能を持つサービス |
| ☑ 外部API利用 | OpenAI等の外部APIを使用 |

**【AI生成コンテンツの種類】**（複数選択可）

| 選択項目 | 説明（ツールチップ可） |
|----------|------------------------|
| ☑ テキスト生成 | 文章・記事・レポート等のテキストコンテンツ |
| ☑ 画像生成 | AI生成画像・イラスト・デザイン素材 |
| ☑ 動画生成 | AI生成動画・アニメーション |
| ☑ 音声生成 | AI音声・ナレーション・音楽 |

**【AI生成コンテンツの利用目的】**（複数選択可）

| 選択項目 | 説明（ツールチップ可） |
|----------|------------------------|
| ☑ 社内利用（研修・教育） | 社内研修資料、教育コンテンツ、eラーニング教材等 |
| ☑ 社内利用（業務効率化） | 会議資料、議事録作成、社内文書作成等 |
| ☑ 会社案内・サービス紹介 | コーポレートサイト、サービス紹介、営業資料等 |
| ☑ 採用・リクルート | 採用サイト、仕事内容紹介、社員インタビュー等 |
| ☑ マーケティング・広告 | 広告素材、SNS投稿、プロモーション動画等 |
| ☑ 顧客向けサービス提供 | ユーザーへのAI生成コンテンツ直接提供 |
| ☑ 商品・製品への組込み | 製品・サービスの一部としてAI生成物を使用 |

**【その他オプション】**

| 選択項目 | 説明（ツールチップ可） |
|----------|------------------------|
| ☑ 参考資料あり（任意） | PDFをアップロードして分析精度を向上 |

### PDF Upload の扱い（重要な変更）

**変更前：**
- 独立したボタンとして目立つ位置に配置
- 「PDF Upload」という技術的な表記

**変更後：**
- STEP① 内の最後の選択項目として統合
- 表示文言を変更：

```
📎 参考資料がある場合のみ追加できます（任意）
   └ PDFをアップロードすると、より正確な分析が可能になります
```

**削除する表記：**
- 「GraphRAG学習」
- 「Embedding」
- その他の技術用語

### 「次へ」ボタン

```
次へ：法的リスクを確認する →
```

**有効化条件：** 最低1つの状況が選択されている

---

## 🟦 STEP② 法的リスク分析（再配置）

### 表示タイミング

- **STEP① 完了後にのみ表示される**
- STEP①で入力された情報がサマリーとして上部に表示

### 入力サマリー表示

```
📋 入力された状況：
   法人サービス / 会員登録あり / 外部API利用

📋 AI生成コンテンツ：
   画像生成 / 動画生成

📋 利用目的：
   社内利用（研修・教育） / 会社案内・サービス紹介 / 採用・リクルート
```

### このステップで表示する機能

**機能A: 自動リスク診断**

**ボタン文言変更（必須）：**

| 変更前 | 変更後 |
|--------|--------|
| リスク診断 | 法的リスクを自動診断する |

**説明文（ボタン上部に表示）：**

```
入力内容をもとに、想定される法的リスクをAIが自動分析します。
```

**機能B: チャット相談**

**説明文：**

```
より詳しく相談したい場合は、チャットで質問できます。
```

**チャット入力欄の表示：**
- STEP②で初めてアクティブになる
- プレースホルダー：「法的リスクについて質問してください...」

### 表示制御

| 状態 | 表示内容 |
|------|----------|
| 診断前 | 「法的リスクを自動診断する」ボタン + チャット入力 |
| 診断中 | ローディング + 「分析中です...」 |
| 診断完了 | 診断結果 + 「規約を作成する」への誘導ボタン |

### 診断完了後の誘導

```
✅ リスク分析が完了しました

分析結果をもとに、あなた専用の利用規約を作成できます。

[ 利用規約を作成する → ]
```

---

## 🟦 STEP③ 規約生成（再設計）

### 表示タイミング

- **STEP②の分析結果が存在する場合：** リスク反映版規約を推奨
- **STEP②をスキップした場合：** 一般規約のみ生成可能

### ボタン文言変更（必須）

| 変更前 | 変更後 |
|--------|--------|
| 規約生成 | 利用規約を作成する |

### 規約生成オプションの明示

```
📝 生成する規約の種類を選択してください

┌─────────────────────────────────────────┐
│ ⭐ リスク反映版（推奨）                   │
│    分析結果を反映した、あなた専用の規約   │
│    ※ STEP②の分析が必要です              │
└─────────────────────────────────────────┘

┌─────────────────────────────────────────┐
│ 📄 一般版                                │
│    標準的な利用規約テンプレート           │
└─────────────────────────────────────────┘
```

### 生成ルールの明示（画面上に必ず表示）

```
💡 規約生成について
・リスク分析を行った場合：分析結果を反映した規約が生成されます（推奨）
・リスク分析を行っていない場合：一般的な利用規約が生成されます
```

---

## ⚙ 技術設定項目の扱い（UIから排除）

### 以下はメインUIから削除する

- ☑ Graph RAG検索
- ☑ Web検索

**これらが問題な理由：**

- 一般ユーザーが判断できない
- UXノイズになる
- 法務判断と直接関係しない

### 新しい配置先

**オプションA：** 右上の「⚙ 設定」アイコン内

**オプションB：** 画面下部の「詳細設定」アコーディオン

```
▼ 詳細設定（上級者向け）
  ☑ 内部知識ベースを使用（GraphRAG）
  ☑ Web検索を使用

  ※ 通常は変更不要です
```

**デフォルト設定：** 両方ON

---

## 🎨 文言変更一覧（実装必須）

### ボタン文言

| 変更前 | 変更後 |
|--------|--------|
| リスク診断 | 法的リスクを確認する |
| 規約生成 | 利用規約を作成する |
| PDF Upload | 参考資料を追加する |

### 技術用語の言い換え

| 禁止用語 | 代替表現 |
|----------|----------|
| GraphRAG | 内部知識ベース / 専門知識 |
| Embedding | （使用しない） |
| Vector | （使用しない） |
| 学習 | 分析精度の向上 |
| Upload | 追加 / アップロード |

---

## 💡 常時表示するガイド要素

### おすすめの使い方（サイドバーまたは上部に常時表示）

```
📖 おすすめの使い方

① 利用状況を入力
   ↓
② 法的リスクを確認
   ↓
③ 利用規約を作成
```

### ヘルプツールチップ

各機能の「？」アイコンにホバーで説明表示：

- **基本情報：** 「あなたのサービス形態を選択すると、基本的な法的リスクを特定できます」
- **AI生成コンテンツの種類：** 「生成するコンテンツの種類によって、著作権等のリスクが異なります」
- **利用目的：** 「社内利用と対外利用では、注意すべき法的観点が大きく異なります」
- **リスク診断：** 「AIがあなたの状況に基づいて、想定される法的リスクを分析します」
- **規約生成：** 「分析結果を反映した、あなた専用の利用規約案を生成します」

---

## 🖼 画面レイアウト構成図

```
┌──────────────────────────────────────────────────────────┐
│ ⚠️ 重要な注意事項（既存のまま維持）                        │
└──────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────┐
│ GAIS [UPDATED]  AI使用上の法的リスク分析           ⚙設定  │
│ 生成AI協会会員向け法的リスク検討支援システム               │
└──────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────┐
│ [ ① 利用状況 ] ──→ [ ② リスク分析 ] ──→ [ ③ 規約生成 ] │
│      ●                   ○                    ○         │
│    (現在)              (未到達)             (未到達)      │
└──────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────┐
│                                                          │
│  あなたの状況を選択してください                           │
│                                                          │
│  ━━━ 基本情報 ━━━                                        │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │
│  │ ☑ 個人開発   │  │ ☐ 法人サービス│  │ ☐ 会員登録あり│   │
│  └──────────────┘  └──────────────┘  └──────────────┘   │
│  ┌──────────────┐                                        │
│  │ ☐ 外部API利用│                                        │
│  └──────────────┘                                        │
│                                                          │
│  ━━━ AI生成コンテンツの種類 ━━━                          │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │
│  │ ☐ テキスト  │  │ ☐ 画像生成   │  │ ☐ 動画生成   │   │
│  └──────────────┘  └──────────────┘  └──────────────┘   │
│  ┌──────────────┐                                        │
│  │ ☐ 音声生成  │                                        │
│  └──────────────┘                                        │
│                                                          │
│  ━━━ AI生成コンテンツの利用目的 ━━━                      │
│  ┌────────────────────┐  ┌────────────────────┐         │
│  │ ☐ 社内利用（研修） │  │ ☐ 社内利用（業務） │         │
│  └────────────────────┘  └────────────────────┘         │
│  ┌────────────────────┐  ┌────────────────────┐         │
│  │ ☐ 会社案内・紹介   │  │ ☐ 採用・リクルート │         │
│  └────────────────────┘  └────────────────────┘         │
│  ┌────────────────────┐  ┌────────────────────┐         │
│  │ ☐ マーケティング   │  │ ☐ 顧客向けサービス │         │
│  └────────────────────┘  └────────────────────┘         │
│  ┌────────────────────┐                                  │
│  │ ☐ 商品への組込み   │                                  │
│  └────────────────────┘                                  │
│                                                          │
│  ┌─────────────────────────────────────────────────┐    │
│  │ 📎 参考資料を追加（任意）                         │    │
│  │    PDFをアップロードすると分析精度が向上します    │    │
│  │                    [ ファイルを選択 ]            │    │
│  └─────────────────────────────────────────────────┘    │
│                                                          │
│                    [ 次へ：法的リスクを確認する → ]       │
│                                                          │
└──────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────┐
│ 📖 おすすめの使い方                                       │
│ ① 利用状況を入力 → ② リスク分析 → ③ 規約生成            │
└──────────────────────────────────────────────────────────┘
```

---

## 🔧 State管理設計（実装参考）

```typescript
type AppStep = 1 | 2 | 3;

interface AppState {
  currentStep: AppStep;

  // STEP① の入力
  userContext: {
    // 基本情報
    isIndividual: boolean;
    isCorporate: boolean;
    hasRegistration: boolean;
    hasExternalAPI: boolean;

    // AI生成コンテンツの種類
    contentTypes: {
      text: boolean;
      image: boolean;
      video: boolean;
      audio: boolean;
    };

    // AI生成コンテンツの利用目的
    usagePurposes: {
      internalTraining: boolean;      // 社内利用（研修・教育）
      internalOperations: boolean;    // 社内利用（業務効率化）
      companyIntroduction: boolean;   // 会社案内・サービス紹介
      recruitment: boolean;           // 採用・リクルート
      marketing: boolean;             // マーケティング・広告
      customerService: boolean;       // 顧客向けサービス提供
      productIntegration: boolean;    // 商品・製品への組込み
    };

    // その他
    hasPDFUploaded: boolean;
  };

  // STEP② の結果
  riskAnalysis: {
    completed: boolean;
    result: RiskAnalysisResult | null;
  };

  // STEP③ の結果
  generatedTerms: {
    type: 'general' | 'risk-reflected';
    content: string | null;
  };
}
```

### ステップ遷移ルール

```typescript
// STEP①→② への遷移条件
const canProceedToStep2 = () => {
  const ctx = state.userContext;
  const hasBasicInfo = ctx.isIndividual || ctx.isCorporate ||
                       ctx.hasRegistration || ctx.hasExternalAPI;
  const hasContentType = Object.values(ctx.contentTypes).some(v => v);
  const hasUsagePurpose = Object.values(ctx.usagePurposes).some(v => v);

  // 基本情報 + (コンテンツ種類 または 利用目的) のいずれかが選択されている
  return hasBasicInfo || hasContentType || hasUsagePurpose;
};

// STEP②→③ への遷移条件（任意）
const canProceedToStep3 = () => {
  return true; // いつでも遷移可能だが、リスク分析済みを推奨表示
};

// リスク反映版規約の生成条件
const canGenerateRiskReflectedTerms = () => {
  return state.riskAnalysis.completed && state.riskAnalysis.result !== null;
};
```

### 利用目的別リスク分析ヒント

```typescript
// 利用目的に応じた追加の法的リスク観点
const riskHintsByPurpose = {
  internalTraining: [
    '著作権法における「私的使用」の範囲',
    '社内利用での引用要件',
    '研修資料の二次利用制限'
  ],
  internalOperations: [
    '議事録・業務文書の正確性担保',
    '機密情報の取り扱い',
    'AI生成物の社内承認フロー'
  ],
  companyIntroduction: [
    '景品表示法（優良誤認・有利誤認）',
    '商標権・意匠権の侵害リスク',
    '企業イメージと生成物の品質管理'
  ],
  recruitment: [
    '職業安定法・労働基準法との整合性',
    '採用活動における表現の適正性',
    '応募者への説明義務'
  ],
  marketing: [
    '景品表示法',
    '著作権・肖像権',
    '広告規制（業界別ガイドライン）'
  ],
  customerService: [
    '利用規約での免責事項',
    '消費者契約法',
    'AI生成物の品質保証'
  ],
  productIntegration: [
    '製造物責任法（PL法）',
    '特許権・著作権のライセンス',
    '製品への組込みに関する表示義務'
  ]
};
```

---

## 🚫 やらないこと（重要）

- ❌ 機能追加は行わない
- ❌ 分析ロジックは変更しない
- ❌ 精度改善は本改修対象外
- ❌ UI上でユーザーに選択を過剰に与えない
- ❌ 技術用語をUIに露出させない

---

## ✅ 改修完了チェックリスト

### 必須項目

- [ ] ステップナビが画面上部に常時表示されている
- [ ] 初期表示がSTEP①になっている
- [ ] STEP①完了まで「リスク診断」「規約生成」が非表示
- [ ] GraphRAG/Web検索チェックボックスがメインUIから削除されている
- [ ] PDF Uploadが STEP①内に統合されている
- [ ] ボタン文言が「行動名」に変更されている
- [ ] 技術用語がUIから排除されている
- [ ] おすすめの使い方が表示されている

### STEP① 選択項目関連

- [ ] 基本情報カテゴリが表示されている
- [ ] AI生成コンテンツの種類（テキスト/画像/動画/音声）が選択可能
- [ ] AI生成コンテンツの利用目的が7項目選択可能
- [ ] 各カテゴリが視覚的に区切られている
- [ ] 複数選択が可能になっている

### 推奨項目

- [ ] 各ステップに説明文が表示されている
- [ ] 入力内容のサマリーがSTEP②で表示されている（カテゴリ別）
- [ ] 規約生成時に「リスク反映版」が推奨表示されている
- [ ] 詳細設定がアコーディオンまたは設定画面に移動している
- [ ] 利用目的に応じたリスク分析ヒントが実装されている

---

## 🎯 この改修の本質

これはUI改善ではなく、

**「多機能AIツール」から「安心して使える法的支援サービス」への変換である。**

---

## ✨ 最終ゴール

ユーザーが迷わず以下を言える状態：

- 「まずこれをやればいいんだ」
- 「次にこれを押せばいいんだ」
- 「この流れなら安心できる」
- 「ちゃんと考えて作られていると感じる」

**この体験を最優先とする。**

---

## 📚 参考：デザインVibe（判断に迷った時の指針）

- 法務系だが堅すぎない
- 医療・金融より少し柔らかい
- 「相談できる」「導いてくれる」印象
- ボタンは少なく、意味を明確に
- 専門的だが怖くない
- 高機能だが迷わない

---

*Document Version: 1.1*
*Last Updated: 2026-02-01*
*Changes: AI生成コンテンツの種類・利用目的の選択項目を追加*
